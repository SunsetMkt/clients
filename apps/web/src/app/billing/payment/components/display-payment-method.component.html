<bit-section>
  <h2 bitTypography="h2">{{ "paymentMethod" | i18n }}</h2>
  @if (paymentMethod) {
    @switch (paymentMethod.type) {
      @case ("bankAccount") {
        @if (!paymentMethod.verified) {
          <app-verify-bank-account [owner]="owner" (verified)="onBankAccountVerified($event)">
          </app-verify-bank-account>
        }

        <p>
          <i class="bwi bwi-fw bwi-billing"></i>
          {{ paymentMethod.bankName }}, *{{ paymentMethod.last4 }}
          @if (!paymentMethod.verified) {
            <span>- {{ "unverified" | i18n }}</span>
          }
        </p>
      }
      @case ("card") {
        <p class="tw-flex tw-items-center tw-gap-2">
          @let brandIcon = getBrandIconForCard();
          @if (brandIcon !== null) {
            <i class="bwi bwi-fw credit-card-icon {{ brandIcon }}"></i>
          } @else {
            <i class="bwi bwi-fw bwi-credit-card"></i>
          }
          {{ paymentMethod.brand | titlecase }}, *{{ paymentMethod.last4 }},
          {{ paymentMethod.expiration }}
        </p>
      }
      @case ("payPal") {
        <p>
          <i class="bwi bwi-fw bwi-paypal tw-text-primary"></i>
          {{ paymentMethod.email }}
        </p>
      }
    }
  } @else {
    <p bitTypography="body1">{{ "noPaymentMethod" | i18n }}</p>
  }
  @let key = paymentMethod ? "changePaymentMethod" : "addPaymentMethod";
  <button type="button" bitButton buttonType="secondary" [bitAction]="changePaymentMethod">
    {{ key | i18n }}
  </button>
</bit-section>
